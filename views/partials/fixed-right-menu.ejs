<%
let breakdownTotal = 0;

let breakdownMile = {distance: '1 Mile', quantity: 0};
let breakdown5k = {distance: '5k', quantity: 0};
let breakdown10k = {distance: '10k', quantity: 0};
let breakdownHalf = {distance: 'Half Marathon', quantity: 0};
let breakdownMarathon = {distance: 'Marathon', quantity: 0};

let raceArr = [breakdownMile, breakdown5k, breakdown10k, breakdownHalf, breakdownMarathon];
%>

<% 
results.forEach(result => {
    if (result.runner._id.equals(runner._id)) {
        breakdownTotal++;
        raceArr.forEach(race => {
            if (race.distance === result.distance.trim()) race.quantity++;
        })
    }
})

%> 


<div class='right-menu'>
    <img src='<%= runner.avatar %> ' >
    <a href='/users/<%= runner._id %>'><h2><%= runner.name %> Summary</h2></a>

    <section>
        <h3>Total Results: <%= breakdownTotal %> </h3>

        <div>
            <h3>Result Breakdown:</h3>

            <h4>1 Mile: <%= breakdownMile.quantity %> </h4>
            <h4>5k: <%= breakdown5k.quantity %> </h4>
            <h4>10k: <%= breakdown10k.quantity %></h4>
            <h4>Half-Marathon: <%= breakdownHalf.quantity %></h4>
            <h4>Marathon: <%= breakdownMarathon.quantity %></h4>
            
        </div>
    </section>

</div>